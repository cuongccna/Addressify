# Addressify environment template

# --- GHN Shipping API ---
# Lấy token tại https://online.ghn.vn. Dùng giá trị demo hoặc sandbox.
GHN_API_TOKEN=25a5875e-9bb5-11f0-9ca8-2a787b58094e
# Shop ID được GHN cấp (ví dụ: 123456).
GHN_SHOP_ID=4978139
# Có thể giữ nguyên URL mặc định nếu dùng môi trường production của GHN.
GHN_API_BASE_URL=https://online-gateway.ghn.vn/shiip/public-api
# Tùy chọn: override timeout (ms) và số lần retry
SHIPPING_API_TIMEOUT_MS=8000
SHIPPING_API_MAX_RETRIES=2
# Tùy chọn: giới hạn số request/phút cho API báo giá (mặc định 20)
GHN_QUOTE_RATE_LIMIT=20

# --- GHTK Shipping API ---
# Đăng ký API token tại https://giaohangtietkiem.vn. Dùng token sandbox nếu chưa có production.
GHTK_API_TOKEN=
# Một số tài khoản yêu cầu Shop ID/Partner ID khi gọi API. Để trống nếu không dùng.
GHTK_SHOP_ID=
# Có thể giữ nguyên URL mặc định nếu dùng môi trường production của GHTK.
GHTK_API_BASE_URL=https://services.giaohangtietkiem.vn
# Tùy chọn: giới hạn số request/phút cho API báo giá GHTK (mặc định 20)
GHTK_QUOTE_RATE_LIMIT=20
# Tùy chọn: hiển thị giá trị rate limit trên UI demo
# NEXT_PUBLIC_GHTK_QUOTE_RATE_LIMIT=20

# --- VTP (Viettel Post) Shipping API ---
# Đăng ký token tại https://viettelpost.vn hoặc cổng đối tác. Dùng token sandbox nếu có.
VTP_API_TOKEN=
# Có thể giữ nguyên URL mặc định nếu dùng môi trường production của VTP.
VTP_API_BASE_URL=https://partner.viettelpost.vn
# Tùy chọn: giới hạn số request/phút cho API báo giá VTP (mặc định 20)
VTP_QUOTE_RATE_LIMIT=20

# --- Aggregator (gom báo giá) ---
# Tùy chọn: giới hạn số request/phút cho API aggregator (mặc định 20)
AGG_QUOTE_RATE_LIMIT=20

# --- Database (Supabase) ---
# Lấy từ Supabase Dashboard > Project Settings > Database
DATABASE_URL=postgresql://postgres:[password]@[project-ref].supabase.co:5432/postgres
# Direct URL for migrations (bypasses connection pooler)
DIRECT_URL=postgresql://postgres:[password]@[project-ref].supabase.co:5432/postgres

# --- Supabase Auth ---
# Lấy từ Supabase Dashboard > Project Settings > API
NEXT_PUBLIC_SUPABASE_URL=https://[project-ref].supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=[your-anon-key]

# --- Phase 5A: Email Notifications ---
# Resend API Key - Get from https://resend.com/api-keys
# Required for: Contact form submissions, webhook notifications, scheduled summaries
RESEND_API_KEY=re_xxxxxxxxxxxxx
# Email sender address (must be verified domain)
# Default: onboarding@resend.dev (for testing only)
# Production: Use your verified domain email
EMAIL_FROM="Addressify <noreply@addressify.vn>"

# --- Phase 5B & 5D: Admin Configuration ---
# Admin user ID from Supabase Auth (for API key management and job control)
# Get this after creating your admin user in Supabase
ADMIN_USER_ID=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# --- Phase 5D: Scheduled Jobs ---
# Timezone for cron jobs (default: Asia/Ho_Chi_Minh)
TZ=Asia/Ho_Chi_Minh

# Optional: Enable/Disable specific jobs (set to "false" to disable)
ENABLE_JOB_RETRY_WEBHOOKS=true
ENABLE_JOB_CLEANUP_WEBHOOK_LOGS=true
ENABLE_JOB_MONITOR_WEBHOOK_HEALTH=true
ENABLE_JOB_SEND_WEEKLY_SUMMARIES=true
ENABLE_JOB_SEND_DAILY_SUMMARIES=true
ENABLE_JOB_CLEANUP_EMAIL_LOGS=true
ENABLE_JOB_CLEANUP_API_KEY_USAGE=true
ENABLE_JOB_CLEANUP_EXPIRED_API_KEYS=true
ENABLE_JOB_CLEANUP_OLD_QUOTES=true
ENABLE_JOB_OPTIMIZE_DATABASE=true
ENABLE_JOB_GENERATE_DATABASE_STATS=true

# Optional: Custom job schedules (cron expressions)
# Examples:
# SCHEDULE_RETRY_WEBHOOKS="*/5 * * * *"  # Every 5 minutes
# SCHEDULE_SEND_DAILY_SUMMARIES="0 8 * * *"  # Daily at 8am
# SCHEDULE_SEND_WEEKLY_SUMMARIES="0 10 * * 1"  # Monday at 10am
# SCHEDULE_CLEANUP_EMAIL_LOGS="0 3 * * *"  # Daily at 3am

# --- Development ---
NODE_ENV=development
